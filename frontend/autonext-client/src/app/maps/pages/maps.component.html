<div>

  <div class="text-center">

    <h1 class="mt-15 text-5xl">Reserva De Plazas</h1>

    <form [formGroup]="myForm" class="mt-10 max-w-sm mx-auto flex justify-center">

      <select-dep [cats]="ciudades" [subcats]="plantasCiudad" [catText]="'Sede'" [subCatText]="'Planta'" (catSubCatSelected)="updateMap($event)"></select-dep>

    </form>


  </div>

  @if (!isLoaded) {
    <div class="loader-container">
      <loader />
    </div>
  }
  

  <div [hidden]="!isLoaded">

    
    <div class="lg:flex lg:justify-center w-full overflow-x-auto">

    <svg  #svgElement  width="800" height="600" viewBox="0 0 800 600" class="w-[800px] block">

      <!-- Imagen de fondo -->
      
      <image
        [attr.href]="'./assets/img/mapas/' +  mapSelected + '.png'"
        width="800"
        height="600"
        (load)="handleImageLoad()" 
      />
        
        
        <!-- Usar ngFor para iterar sobre los puntos y agregar cÃ­rculos con colores -->
        @for (point of points[mapSelected]; track $index) {
          <g
            [attr.transform]="'translate(' + (point.x - 23) + ',' + (point.y-25) + ') rotate(' + point.direccion + ', 17, 22)'"
          >
          
            <!-- Aplicamos el color del filtro -->
            <use
              xlink:href="./assets/svg/CarIcon.svg#custom-marker"
              width="35" height="44"
              [attr.filter]="point.color">
            </use>

          </g>
        }
      </svg>
      
    </div>
  </div>
  </div>
